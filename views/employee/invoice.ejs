<div class="scaleable-wrapper" id="scaleable-wrapper">
  <div class="ratio8511 bg-white text-dark p-5 d-flex flex-column " id="scaleable-design">
    <div class="row mb-3">
      <div class="col">
        <h1 class="display-4"><%- currentUser.businessName %> </h1>
        <%- currentUser.street %><br>
        <%- currentUser.city %>, <%- currentUser.province %> <%- currentUser.postal %><br>
        Phone: <%= phoneHelper.formatPhoneNumber(currentUser.phone) %> <br>
        Email: <%- currentUser.email %> 
      </div>
      <div class="col ">
        <h1 class="display-4 text-end">Invoice</h1>
        <div class="row w-auto">
          <div class="col text-end">
            Supply Date <br>
            Invoice ID <br>
            Due Date
          </div>
          <div class="col-auto" >
            <%- invoice.supply_formatted_weekday %><br>
            <%- invoice.title %> <br>
            <%- invoice.due_formatted_weekday %>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="row mb-3">
      <div class="col">
        <h3>Bill To:</h3>
      <%- invoice.client.name %> <br>
      <%- invoice.client.street %> <br>
      <%- invoice.client.city %>, <%- invoice.client.province %> <%- invoice.client.postal %> <br>
      Phone: <%= phoneHelper.formatPhoneNumber(invoice.client.phone) %> 
      </div>
           
    </div>
    <hr>
    <div class="row flex-grow-1" >
      
      <div class="col">
        <h3 class="mb-3">Services</h3>
        <table class="table table-striped table-bordered table-responsive w-auto">
          <thead class="table-dark">
            <tr>
              <th scope="col">Title</th>
              <th scope="col" width="100%" >Description</th>
              <th></th>
              <th scope="col" class="text-end">Price</th>
            </tr>
          </thead>
          <tbody>
            <% invoice_services.forEach(service => { %>
              
              <tr>
                <td class="align-middle"><%- service.title %></td>
                <td class="align-middle"><%- service.description %> </td>
                <td></td>
                <td class="m-0 text-end">$<%- service.price.toFixed(2) %></td>             
              </tr>
              
            <% }) %> 
            <tr>
              <td></td>
              <td></td>
              <th class="text-end h5">Subtotal</th>
              <th class="text-end h5">$<%- invoice.subtotal %></th>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <th class="text-end h5 text-nowrap">Tax Rate</th>
              <th class="text-end h5"><%- invoice.tax %>%</th>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <th class="text-end h4">Total</th>
              <th class="text-end h4">$<%- invoice.total %></th>
            </tr>
          </tbody>
        </table>
      </div>
      
      <% if(invoice.services.length == 0) {%> 
        <p>No services</p>
      <% }%>
    </div>
    <hr>
    <div class="row pb-0 mb-0">
      <p class="text-center">If you have any questions about this invoice, please contact <br>
        <%- currentUser.name %>, <%= phoneHelper.formatPhoneNumber(currentUser.phone) %>, <%- currentUser.email %>   
      </p>
    </div>
    
    
  </div>
</div>

<script src="/public/javascripts/scale.js"></script>
